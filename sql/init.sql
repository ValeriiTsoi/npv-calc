CREATE TABLE IF NOT EXISTS npv_values(id BIGSERIAL PRIMARY KEY, valuation_date DATE NOT NULL, symbol VARCHAR(32) NOT NULL, npv NUMERIC(18,6) NOT NULL, algo_version VARCHAR(32), calculated_at TIMESTAMPTZ DEFAULT NOW(), CONSTRAINT uk_date_symbol UNIQUE (valuation_date, symbol)); CREATE TABLE IF NOT EXISTS user_tokens(id BIGSERIAL PRIMARY KEY, username VARCHAR(128) NOT NULL, token VARCHAR(128) NOT NULL UNIQUE, expires_at TIMESTAMPTZ NOT NULL, revoked BOOLEAN NOT NULL DEFAULT FALSE); CREATE INDEX IF NOT EXISTS idx_user_tokens_token ON user_tokens(token);